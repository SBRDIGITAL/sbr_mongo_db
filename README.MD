# Методичка по развёртыванию MongoDB в Docker Compose

### Шаг 1: Установка Docker и Docker Compose

1. **Установите Docker**:
   - Перейдите на [официальный сайт Docker](https://www.docker.com/products/docker-desktop) и скачайте установщик для вашей операционной системы.
   - Установите Docker, следуя инструкциям на экране.

2. **Проверьте установку**:
   - В командной строке выполните команды:
     ```bash
     docker --version
     docker-compose --version
     ```

---

### Шаг 2: Настройка `docker-compose.yml` и `.env`

1. **Создайте директорию для проекта**:
   ```bash
   mkdir mongo_docker && cd mongo_docker
   ```

2. **Склонируйте репозиторий**:
   - Используйте следующую команду для клонирования репозитория:
   ```bash
   git clone https://github.com/SBRDIGITAL/sbr_mongo_db.git
   ```

3. **Переименуйте `.env.example` в `.env`**

4. **Задайте нужные переменные в `.env`**:
    - Вместо `root` используйте свой логин
    - Вместо `example` используйте свой пароль
    - Оставьте `localhost` как есть.
    ```bash
        MONGO_INITDB_ROOT_USERNAME=root
        MONGO_INITDB_ROOT_PASSWORD=example
        MONGO_DB_HOST=localhost
    ```

---

### Шаг 3: Запуск MongoDB

1. **Запустите контейнеры**:
   В командной строке выполните:
   ```bash
   docker-compose up -d
   ```

2. **Проверьте статус контейнеров**:
   ```bash
   docker ps
   ```
   или
   ```bash
   docker-compose ps
   ```

---

### Шаг 4: Проверка подключения

1. **Подключитесь к MongoDB из контейнера**:
   Выполните команду:
   ```bash
        docker exec -it mongo_1 mongosh
   ```
   После подключения вы сможете выполнять команды MongoDB.

2. **Подключитесь через MongoDB Compass**:
    - Используйте следующие данные для подключения:
    ```bash
     Host: localhost
     Port: 27017
     Username: root
     Password: example
    ```
    - или используйте строку
    ```bash
        mongodb://root:example@localhost:27017
    ```

---

### Шаг 5: Остановка контейнера

1. **Остановите контейнеры**:
   ```bash
   docker-compose down
   ```

---

### Шаг 6: Очистка данных (при необходимости)

1. **Удалите созданные данные**:
   ```bash
   rm -rf ./data/db
   ```

2. **Удалите все неиспользуемые Docker-объекты**:
   - Если необходимо очистить все неиспользуемые Docker-объекты (например, остановленные контейнеры, неиспользуемые изображения и тома), можно выполнить команду:
   ```bash
      docker system prune -a
   ```
   - Эта команда удалит:
      - Все остановленные контейнеры.
      - Все неиспользуемые образы (images).
      - Все неиспользуемые тома (volumes).
      - Все неиспользуемые сети (networks).
      
   ###  **Будьте осторожны: Эта команда может удалить данные, которые еще могут понадобиться, если они не привязаны к работающим контейнерам.**

---

## Теперь ваша MongoDB успешно работает в Docker и готова к использованию!
